<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
  <link rel="stylesheet" href="css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="white"/>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />  
  <link rel="apple-touch-icon" href="images/hello-icon-152.png">   
  <meta name="theme-color" content="white"/>  
  <meta name="apple-mobile-web-app-capable" content="yes">  
  <meta name="apple-mobile-web-app-status-bar-style" content="black"> 
  <meta name="apple-mobile-web-app-title" content="Hello World!"> 
  <meta name="msapplication-TileImage" content="images/hello-icon-144.png">  
  <meta name="msapplication-TileColor" content="#FFFFFF">
<body class="fullscreen">
      <!-- https://medium.com/james-johnson/a-simple-progressive-web-app-tutorial-f9708e5f2605 -->
  <div class="container">
    <h1 class="title">LocalDB testi</h1>
    <button id="do-stuff">Do stuff del some, list </button> <br>
    <textarea id="resultset"></textarea>
  
  </div>
  <script src="js/main.js"></script>
  <script src="https://unpkg.com/localbase/dist/localbase.min.js"></script>

  <script>
    //https://github.com/dannyconnell/localbase/blob/master/README.md
    let db = new Localbase('db')

    let buttonDoStuff=document.getElementById('do-stuff')
    buttonDoStuff.addEventListener('click',doStuff)

    function doStuff(){
      console.log('del toimii')

      //db.collection('users').doc({ id: 1 }).delete()

      /*
      db.collection('users').add({
      id: 3,
      name: 'Kalle',
      age: 22
      })

     
      db.collection('users').add({
      id: 4,
      name: 'Bill',
      age: 47
      })
      */


      db.collection('users')
        .doc({ name: 'Bill' })
        .delete()
        .then(response => {
          console.log('Delete successful, now do something.')

          db.collection('users').get().then(users => {
              //resultset.value =users[0].name

              let listOfNames ="";
              users.forEach(element => {
                listOfNames+=element.name
                
              });

              resultset.value =listOfNames
              //console.log(users)
            })
      })
      .catch(error => {
        console.log('There was an error, do something else.')
      })



      
      


/*
      db.collection('users').doc({ id: 1 }).update({
        name: 'William'
      })
      */
      // eipä tämä toiminutkaan:
      /*
      db.collection('users')
      .set([
        {
          id: 1,
          name: 'Billy',
          age: 44
        },
        {
          id: 2, 
          name: 'Paul',
          age: 28
        }
      ])
      */

      



    }
  </script>

</body>

</html>
